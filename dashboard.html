<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Dashboard | Learn with GPT</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
/* General Reset */
body { margin:0; font-family:Arial,sans-serif; background:#f4f6f8; }

/* Header */
.header {
    display:flex;
    align-items:center;
    justify-content:space-between;
    background:#0B3D91;
    color:white;
    padding:20px 20px 30px; /* increased top padding */
    border-bottom-left-radius:22px;
    border-bottom-right-radius:22px;
    position:relative;
}

/* Hamburger and logout */
.header .hamburger, .header .logout {
    font-size:22px;
    cursor:pointer;
}

/* Center area: logo + title + welcome */
.header-center {
    flex:1;
    text-align:center;
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
}

.header-logo {
    height:35px;
    margin-bottom:5px;
}

.header .title {
    font-size:20px;
    font-weight:bold;
}

.header .welcome {
    font-size:14px;
    margin-top:3px;
    opacity:0.9;
}

/* Sidebar Menu */
.menu {
    position:fixed;
    top:0; left:0;
    width:260px; height:100%;
    background:#fff;
    box-shadow:2px 0 6px rgba(0,0,0,0.2);
    padding-top:20px;
    transform:translateX(-100%);
    transition:transform 0.3s ease;
    z-index:1000;
    display:flex;
    flex-direction:column;
}
.menu.open { transform:translateX(0); }
.menu-top { text-align:center; padding:20px 0; border-bottom:1px solid #e3ebf5; }
.menu-logo { width:100px; height:auto; border-radius:50%; }
.menu a {
    display:block;
    padding:15px 20px;
    text-decoration:none;
    color:#333;
    font-size:16px;
}
.menu a i { margin-right:10px; color:#0B3D91; }
.menu a:hover { background:#e3ebf5; }

/* Grid Cards */
.grid {
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(140px,1fr));
    gap:15px;
    padding:20px;
}
.card {
    background:white;
    padding:30px 20px;
    text-align:center;
    border-radius:14px;
    cursor:pointer;
    box-shadow:0 2px 5px rgba(0,0,0,0.08);
    transition:0.2s;
}
.card i { font-size:30px; color:#0B3D91; margin-bottom:10px; }
.card span { display:block; font-size:16px; font-weight:500; }
.card:hover { background:#eef3fa; }
</style>
</head>

<body>

<!-- Sidebar -->
<div id="sideMenu" class="menu">
    <div class="menu-top"><img src="nqlogo.jpg" alt="Logo" class="menu-logo"></div>
    <a href="about.html"><i class="fa-solid fa-phone"></i>Contact Us</a>
    <a href="motivation.html"><i class="fa-solid fa-lightbulb"></i>Motivation</a>
    <a href="calculator.html"><i class="fa-solid fa-calculator"></i>Calculator</a>
    <a href="ca_calculator.html"><i class="fa-solid fa-calculator"></i>CA-Calculator</a>
</div>

<!-- Header -->
<div class="header">
    <div class="hamburger"><i class="fa-solid fa-bars"></i></div>

    <!-- Centered logo + title + welcome -->
    <div class="header-center">
        <img src="nqlogo.jpg" alt="Logo" class="header-logo">
        <div class="title">Learn with GPT</div>
        <div class="welcome">Learn New Things Today<strong id=""></strong></div>
    </div>

    <div class="logout"><i class="fa-solid fa-power-off"></i></div>
</div>

<!-- Main Grid -->
<div class="grid">
    <div class="card" onclick="location.href='videos.html'"><i class="fa-solid fa-play"></i><span>Videos</span></div>
    <div class="card" onclick="location.href='documents.html'"><i class="fa-solid fa-folder-open"></i><span>Documents</span></div>
    <div class="card" onclick="location.href='quiz.html'"><i class="fa-solid fa-circle-question"></i><span>Quiz</span></div>
    <div class="card" onclick="location.href='pastpapers.html'"><i class="fa-solid fa-box-archive"></i><span>Past Papers</span></div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";
import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

const firebaseConfig = {
    apiKey: "AIzaSyB7e9k4jB4sVDpqK0wKdY1GK3wEI8fFck4",
  authDomain: "smarthub-ff357.firebaseapp.com",
  projectId: "smarthub-ff357",
  storageBucket: "smarthub-ff357.firebasestorage.app",
  messagingSenderId: "794427490398",
  appId: "1:794427490398:web:3350b0927dfc62d30134cf",
  measurementId: "G-7FZTLSB4LG"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

/* Sidebar toggle */
const sideMenu = document.getElementById("sideMenu");
const hamburger = document.querySelector('.hamburger');
hamburger.onclick = () => sideMenu.classList.toggle("open");

/* Click outside closes sidebar */
document.addEventListener('click', e=>{
    if(!sideMenu.contains(e.target) && !hamburger.contains(e.target)){
        sideMenu.classList.remove("open");
    }
});

/* Close sidebar on link click */
sideMenu.querySelectorAll('a').forEach(link => link.addEventListener('click', ()=>{
    sideMenu.classList.remove("open");
}));

/* Logout */
document.querySelector('.logout').onclick = async ()=>{
    await signOut(auth);
    localStorage.removeItem("name");
    window.location.href = "login.html";
};

/* Show username */
onAuthStateChanged(auth, async user=>{
    if(!user) return window.location.href="login.html";
    try{
        const snap = await getDoc(doc(db,"users",user.uid));
        const name = snap.exists()? snap.data().name : "User";
        document.getElementById("username").innerText = name;
        localStorage.setItem("name", name);
    }catch(e){
        document.getElementById("username").innerText = localStorage.getItem("name") || "User";
    }
});
</script>

</body>
</html>